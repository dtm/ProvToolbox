<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>ProvValidator API Documentation</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Le styles -->
	<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
	<style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
	</style>
	<script src="jquery/jquery-1.7.2.min.js"></script>
	<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

	<!-- Le fav and touch icons -->
	<link rel="shortcut icon" href="bootstrap/ico/favicon.ico">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootstrap/ico/apple-touch-icon-114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootstrap/ico/apple-touch-icon-72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" href="bootstrap/ico/apple-touch-icon-57-precomposed.png">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="api.js"></script>
	<script>
//<!--
var validator;
function do_validate_url()
{
	validator.validate(
            {'url': $('#url').val()},
	    function(jqXHR){ $('#thingie').html(jqXHR.responseText); }
	    );
}

function do_translate_url()
{
	validator.translate(
            {'url': $('#url').val()},
	    "application/json",
	    function(jqXHR){ $('#thingie').html(jqXHR.responseText); }
	    );
}


function do_translate_statements()
{
	var type="provn";
	statements=$('#statements').val();
	$('#thingie').html(statements);
	validator.translate(
	    {'statements': statements, 'type': 'provn'},
	    "application/json",
	    function(jqXHR) { $('#thingie').html(jqXHR.responseText);}
	    );
}
function do_validate_statements()
{
	var type="provn";
	statements=$('#statements').val();
	$('#thingie').html(statements);
	validator.validate(
	    {'statements': statements, 'type': 'provn'},
	    function(jqXHR) { $('#thingie').html(jqXHR.responseText);}
	    );
}
$(document).ready(function(){
	var my_loc = document.location.toString();
	var val_endpoint = my_loc.substring(0, my_loc.lastIndexOf("/"))+"/";
	validator = new ProvService(val_endpoint);
});
//-->
	</script>
</head>
<body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="view/validator.html">ProvValidator</a></li>
              <li><a href="view/translator.html">ProvTranslator</a></li>
              <li class="active"><a href="api.html">API</a></li>
              <li><a href="about.html">About</a></li>
              <li><a href="contact.html">Contact</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
        <div class="container">
      <div class="row-fluid">
      <div class="span2"></div>
      <div class="span8">
	<h2>PROV Validator API Documentation</h2>


<p>
<p>
<p>

	<h2>Old Documentation</h2>


<h3>Invoking the service</h3>

<p>
The service endpoint responds to HTTP <tt>POST</tt> requests at the URL ending <tt>/provapi/submit</tt>.
Provenance can be specified either as a file upload, via a url or by including the
statements with in the submission.
The request must be encoded as <tt>multipart/form-data</tt>.
The request should consist of fields one selected from "Content method" and one selected "Request type" from the following fields:
</p>

<table class="table">
<tr>
<th>Content specification</th>
<th>Field</th>
<th>Value</th>
<th>Example</th>
</tr>
<tr>
<th style="text-align: left">- File upload</th>
<td><tt>file</tt></td>
<td>file upload data</td>
<td><tt>...</tt></td>
</tr>
<tr>
<th style="text-align: left">- Specify URL</th>
<td><tt>url</tt></td>
<td>url of the resource</td>
<td><tt>http://www.google.com/</tt></td>
</tr>
<tr>
<th rowspan="2" style="text-align: left">- Inline Statements</th>
<td><tt>statements</tt></td>
<td>body of statements</td>
<td><tt>entity(a)</tt></td>
</tr>
<tr>
<td><tt>type</tt></td>
<td>the type of the statements: ttl,rdf/xml,provn,xml</td>
<td><tt>prov</tt></td>
</tr>
<tr>
<th>Request type</th>
<th>Field</th>
<th>Value</th>
<th>Comment</th>
</tr>
<tr>
<th style="text-align: left">- Validation</th>
<td><tt>validate</tt></td>
<td><tt>Validate</tt></td>
<td>Request a validation</td>
</tr>
<tr>
<th rowspan="6" style="text-align: left">- Translation</th>
<td><tt>translate</tt></td>
<td><tt>json</tt></td>
<td>Choose one of these</td>
</tr>
<tr>
<td><tt>translate</tt></td>
<td><tt>xml</tt></td>
<td></td>
</tr>
<tr>
<td><tt>translate</tt></td>
<td><tt>provn</tt></td>
<td></td>
</tr>
<tr>
<td><tt>translate</tt></td>
<td><tt>turtle</tt></td>
<td></td>
</tr>
<tr>
<td><tt>translate</tt></td>
<td><tt>trig</tt></td>
<td></td>
</tr>
<tr>
<td><tt>translate</tt></td>
<td><tt>svg</tt></td>
<td></td>
</tr>
</table>

<h3>Response</h3>

<p>
On successful acceptance of the provenance the service will redirect (via HTTP <tt>303 See Other</tt>) to appropriate resources.
</p>

<h4>Validation</h4>

<p>
The service redirects to a validation resource. You must specify an <tt>Accept:</tt> header to obtain the validation report
in the appropriate format (For HTML: <tt>text/html</tt>, For XML: <tt>application/xml</tt> or <tt>text/xml</tt>). For example:
</p>

<pre>
Request: POST /provapi/submit
Response: 303 /provapi/graph1582655949156048026/validation

Request: GET /provapi/graph1582655949156048026/validation
         Accept: application/xml
Response: 303 /provapi/graph1582655949156048026/validation.xml

Request: GET /provapi/graph1582655949156048026/validation.xml
Response: 200 &lt;validation report in xml&gt;
</pre>

<h4>Translation</h4>

<p>
For translation, it is possible to negotiate the output format via the <tt>HTTP</tt> <tt>Accept:</tt> header, instead of indicating the type
as a field in the <tt>POST</tt> request. The service supports the following mimetypes:
</p>
<table class="table">
<tr>
<th>Mimetype</th>
<th>Type</th>
</tr>
<tr>
<td><tt>text/vnd.graphviz</tt></td>
<td>Graph in GraphViz dot format</td>
</tr>
<tr>
<td><tt>image/jpeg</tt></td>
<td>Graph rendered as a JPEG image</td>
</tr>
<tr>
<td><tt>application/pdf</tt></td>
<td>Graph rendered in a PDF</td>
</tr>
<tr>
<td><tt>image/svg+xml</tt></td>
<td>Graph rendered in SVG</td>
</tr>
<tr>
<td><tt>application/json</tt></td>
<td>PROV-JSON serialization</td>
</tr>
<tr>
<td><tt>text/provenance-notation</tt></td>
<td>PROV-N</td>
</tr>
<tr>
<td><tt>application/rdf+xml</tt></td>
<td>PROV-O via RDF encoded in XML</td>
</tr>
<tr>
<td><tt>application/x-trig</tt></td>
<td>PROV-O in TriG</td>
</tr>
<tr>
<td><tt>text/turtle</tt></td>
<td>PROV-O in Turtle</td>
</tr>
<tr>
<td><tt>text/xml</tt></td>
<td>PROV-XML</td>
</tr>
</table>

<h4>Example Interaction</h4>
<pre>
Request: POST /provapi/submit
         Accept: application/json
Response: 303 /provapi/graph1582655949156048026/translate

Request: GET /provapi/graph1582655949156048026/translate
         Accept: application/json
Response: 303 /provapi/graph1582655949156048026/translate/json

Request: GET /provapi/graph1582655949156048026/translate/json
Response: 200  &lt;json encoded PROV&gt;
</pre>

<h3>JavaScript API</h3>

<p>
A JavaScript API is provided. Include the <tt>api.js</tt> in in the <tt>&lt;head&gt;</tt> of your HTML document. The API relies on jQuery,
so include this also. In this example, we use Google's CDN to provide jQuery.
</p>

<pre>
	&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"&gt;&lt;/script&gt;
	&lt;script src="api.js"&gt;&lt;/script&gt;
</pre>

<p>
Instantiate a new Validator object:
</p>
<pre>
	var validator = new ProvService("url to validator");
</pre>

<p>
The Validator object provides two methods:
</p>

<table class="table">
<tr>
<th>Request Type</th>
<th>Method Call</th>
</tr>
<tr>
<th>Validation</th>
<td><tt>validate(</tt>input, callback, data_only<tt>)</tt></td>
</tr>
<tr>
<th>Translation</th>
<td><tt>translate(</tt>input, mimetype, callback, data_only<tt>)</tt></td>
</tr>
<tr>
</table>

<p>
Content specification ("input") is an object:
</p>

<table class="table">
<tr>
<th>Type</th>
<th>Field</th>
</tr>
<tr>
<th>URL</th>
<td><tt>url</tt></td>
<td>URL to resource</td>
</tr>
<tr>
<th rowspan="2">Inline</th>
<td><tt>statements</tt></td>
<td>Provenance statements</td>
</tr>
<tr>
<td><tt>type</tt></td>
<td>the type of the statements: ttl,rdf/xml,provn,xml</td>
</tr>
</table>

<p>
The <tt>callback</tt> argument is the function to call once the validation or translation is completed.
This is a jQuery.ajax callback (the <tt>always</tt> variant) - see jQuery <a href="http://api.jquery.com/jQuery.ajax/">documentation</a>. Alternatively, if data_only is true then the parameter passed to the callback is the actual response data after jQuery's best efforts at converting it to a native format.
</p>

<h4>Examples</h4>
<pre>
	validator.validate(
	    {'url': 'http://www.w3.org/2011/prov/provenance/prov-dm'},
	    function(jqXHR) { alert("Validator responded"); }
	    );
</pre>

<pre>
	validator.translate(
	    {'statements': 'entity(a)', 'type': 'provn'},
	    "application/json",
	    function(jqXHR) { alert("Validator responded with: "+jqXHR.reponseText); }
	    );
</pre>
<p>
See the code in action: <a href="test_js.html">api test</a>.
</p>


</div>
      <div class="span2">&nbsp;</div>
</div>
</div>
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--
    <script src="bootstrap/js/jquery.js"></script>
    <script src="bootstrap/js/bootstrap-transition.js"></script>
    <script src="bootstrap/js/bootstrap-alert.js"></script>
    <script src="bootstrap/js/bootstrap-modal.js"></script>
    <script src="bootstrap/js/bootstrap-scrollspy.js"></script>
    <script src="bootstrap/js/bootstrap-tab.js"></script>
    <script src="bootstrap/js/bootstrap-tooltip.js"></script>
    <script src="bootstrap/js/bootstrap-popover.js"></script>
    <script src="bootstrap/js/bootstrap-button.js"></script>
    <script src="bootstrap/js/bootstrap-collapse.js"></script>
    <script src="bootstrap/js/bootstrap-carousel.js"></script>
    <script src="bootstrap/js/bootstrap-typeahead.js"></script>
-->
</body>
</html>
